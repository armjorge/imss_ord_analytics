version: 2

sources: 
  - name: IMSS_LANDING
    database: IMSS_ORDINARIO
    schema: LANDING_DEV
    tables:
      - name: IMSS_ALTAS_LANDING
        tests:
          - dbt_utils.unique_combination_of_columns:
              arguments:
                combination_of_columns:
                  - NOALTA
                  - NOORDEN
                  - FILE_TIMESTAMP
        columns: 
          - name: NOALTA
            tests: 
              - not_null
      - name: IMSS_INVOCES_LANDING
        columns: 
          - name: ALTA
            tests: 
              - relationships: 
                  arguments: 
                    to: source('IMSS_LANDING', 'IMSS_ALTAS_LANDING')
                    field: NOALTA
      - name: IMSS_ORDERS_LANDING
        columns: 
          - name: CONTRATO
            tests: 
              - not_null  
      - name: IMSS_PREI_LANDING
        columns: 
          - name: FOLIO_FISCAL
            tests: 
              - not_null
            